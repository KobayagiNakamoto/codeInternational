
<html>
<head>

<title>卡雷尔读者</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> 
<script src="../../plugins/jquery.min.js"></script>
<link href="../../plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"/> 
<script src="../../plugins/bootstrap/js/bootstrap.min.js"></script>
<link href="../../style.css" rel="stylesheet"/> 
<script src="../..//karel/js/html/websiteImports.js"></script>
<script>importCss();</script>
<script>importJs();</script>
</head>
<body>
<!-- container -->
<div class="bookContainer">

<!-- side bar -->
<div class="bookSideBar">
<div class="homeLink">
 <a href="../../python/zh/intro.html">
<span aria-hidden="true" class="glyphicon glyphicon-home"></span> 卡雷尔</a> 
</div>
<hr/>
<div class="chapterTab" onclick="location.href='../../python/zh/chapter1.html'">
<a class="bookLink btn btn-link" href="../../python/zh/chapter1.html">1  - 遇见卡雷尔</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/chapter2.html'">
<a class="bookLink btn btn-link" href="../../python/zh/chapter2.html">2  - 编程</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/chapter3.html'">
<a class="bookLink btn btn-link" href="../../python/zh/chapter3.html">3-新功能</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/chapter4.html'">
<a class="bookLink btn btn-link" href="../../python/zh/chapter4.html">4  - 分解</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/chapter5.html'">
<a class="bookLink btn btn-link" href="../../python/zh/chapter5.html">5  - 对于循环</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/chapter6.html'">
<a class="bookLink btn btn-link" href="../../python/zh/chapter6.html">6  - 循环时</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/chapter7.html'">
<a class="bookLink btn btn-link" href="../../python/zh/chapter7.html">7  - 条件</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/chapter8.html'">
<a class="bookLink btn btn-link" href="../../python/zh/chapter8.html">8  - 细化</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/chapter9.html'">
<a class="bookLink btn btn-link" href="../../python/zh/chapter9.html">9-额外功能</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/reference.html'">
<a class="bookLink btn btn-link" href="../../python/zh/reference.html">10  - 参考</a> 
</div>
<div class="chapterTab" onclick="location.href='../../python/zh/ide.html'">
<a class="bookLink btn btn-link" href="../../python/zh/ide.html">11  - 代码</a> 
</div>
<hr/>
<!-- <a href="../../"><img style = "width:40px" src="../../images/unFlag.png"/>  Learn more</a>  -->
<!-- <center>
    <img style ="width:75px;" src="../../images/stanford.png"/> 
    </center> -->
</div>
<!-- content -->
<div class="bookContent" style="display: flex;">
<!-- right gutter -->
<div style="flex-grow:1;max-width:50px;"></div>
<!-- main stuff -->
<div class="" style="flex-basis:740px; max-width:740px; margin-left:20px; margin-right:20px">
<div class="row">
<div class="col-md-12 col-xs-12">


<h1>第三章：定义新功能</h1>
<hr/>
<p>在上一章中，我们编写了一个程序来帮助Karel爬上一个简单的壁架：</p>
<h3>示例：第一个卡雷尔</h3>





<div class="section embeddedIde" id="beeperPickingRedux">
<div class="ide getStarted" id="beeperPickingReduxIde" style="height:302.6px">
<div class="ideCenter" id="beeperPickingReduxIdeCenter">
<div class="ideEditorDiv" id="beeperPickingReduxEditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="beeperPickingReduxCanvasDiv">
<canvas class="ideCanvas" id="beeperPickingReduxCanvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="beeperPickingReduxRunButton"><span class="glyphicon glyphicon-play"></span>运行程序</button>
</div>
</div>
<script>

        

function examplebeeperPickingRedux() {
STARTER_CODE = `

＃文件：FirstKarel.py
＃-----------------------------
锥体拿起锥体并将其放在壁架上。
from 卡雷尔.stanford import *
def main() :
   move()
   选择锥体()
   move()
   turn_left()
   move()
   turn_left()
   turn_left()
   turn_left()
   move()
   move()
   放锥体()
   move()
`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('beeperPickingReduxEditor','beeperPickingReduxEditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('beeperPickingReduxCanvas');
    karelIde = KarelIde('python',karelEditor, canvas, 'stepUp', 0.8, 'zh');
    $('#beeperPickingReduxRunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#beeperPickingReduxRunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#beeperPickingReduxRunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 302.6;
    var canvasWidth = 300
    var parentWidth = $("#beeperPickingRedux").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('beeperPickingReduxIde');
    var editorDiv = document.getElementById('beeperPickingReduxEditorDiv');
    var canvas = document.getElementById('beeperPickingReduxCanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplebeeperPickingRedux();
    </script>
</div>

<p>即使 <code>第一个卡雷尔</code> 上面的程序表明可以执行 <code>turn_right()</code> 仅使用Karel的内置命令进行操作，所得程序在概念上并不特别清楚。在您对程序进行心理设计时，Karel在到达窗台顶部时会向右转。您必须使用三个事实 <code>turn_left()</code> 命令这样做很烦人。如果您可以简单地说，那会简单得多 <code>turn_right()</code> 让卡雷尔明白这个命令。生成的程序不仅更短，更容易编写，而且更容易阅读。</p>
<h3>定义新命令</h3>
<p>幸运的是，卡雷尔（Karel）编程语言可以通过简单地包含新的函数定义来定义新命令。每当您具有执行某些有用任务（例如右转）的Karel命令序列时，您都可以定义一个执行该命令序列的新函数。定义新的Karel函数的格式与的定义基本相同 <code>main()</code> 在前面的示例中，它本身就是一个函数定义。典型的函数定义如下所示：</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">def</span> </code> <i class="demoText">名称</i> <code>():</code> <br/>
<i class="demoText" style="margin-left:3.5em">组成函数主体的命令</i><br/>
</p>
<p>在此模式中，名称表示您为新功能选择的名称。要完成定义，您所要做的就是在冒号后的各行中提供命令序列，这些命令均由一个制表符缩进。例如，您可以定义 <code>turn_right()</code> 如下：</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">def</span> turn_right():</code> <br/>
 <code style="margin-left:3.5em">turn_left()</code> <br/>
 <code style="margin-left:3.5em">turn_left()</code> <br/>
 <code style="margin-left:3.5em">turn_left()</code> <br/>
</p>
<p>同样，您可以定义一个新的 <code>turn_around()</code> 像这样的功能：</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">def</span> turn_around():</code> <br/>
 <code style="margin-left:3.5em">turn_left()</code> <br/>
 <code style="margin-left:3.5em">turn_left()</code> <br/>
</p>
<p>您可以像Karel的任何内置命令一样使用新函数的名称。例如，一旦定义 <code>turn_right()</code> ，您可以替换这三个 <code>turn_left()</code> 只需调用一次程序中的命令 <code>turn_right()</code> 功能。这是使用 <code>turn_right()</code> ：</p>





<div class="section embeddedIde" id="stepUp2">
<div class="ide getStarted" id="stepUp2Ide" style="height:409.40000000000003px">
<div class="ideCenter" id="stepUp2IdeCenter">
<div class="ideEditorDiv" id="stepUp2EditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="stepUp2CanvasDiv">
<canvas class="ideCanvas" id="stepUp2Canvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="stepUp2RunButton"><span class="glyphicon glyphicon-play"></span>运行程序</button>
</div>
</div>
<script>

        

function examplestepUp2() {
STARTER_CODE = `

＃文件：BeeperPickingKarel.py
＃-----------------------------
＃BeeperPickingKarel程序定义了“ main ”
＃函数带有三个命令。这些命令导致
＃卡雷尔（Karel）以move前进一个方块，捡起一个
＃ 锥体 ，然后move到达下一个角。
from 卡雷尔.stanford import *
def main():
   move()
   选择锥体()
   move()
   turn_left()
   move()
   turn_right()
   move()
   move()
   放锥体()
   move()

def turn_right():
   turn_left()
   turn_left()
   turn_left()
`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('stepUp2Editor','stepUp2EditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('stepUp2Canvas');
    karelIde = KarelIde('python',karelEditor, canvas, 'stepUp', 0.0, 'zh');
    $('#stepUp2RunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#stepUp2RunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#stepUp2RunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 409.40000000000003;
    var canvasWidth = 300
    var parentWidth = $("#stepUp2").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('stepUp2Ide');
    var editorDiv = document.getElementById('stepUp2EditorDiv');
    var canvas = document.getElementById('stepUp2CanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplestepUp2();
    </script>
</div>

<h3>功能码块</h3>
<p>一组命令跟随冒号 <code translate="no">:</code> 缩进的称为 <b>代码块</b> 。函数的主体是一个代码块。请注意，代码块的内容是如何在一个选项卡中全部缩进的。这在功能上很重要，因为它允许Python知道给定块中的代码行。</p>
<p>您可以定义任意数量的函数。它们都应该一个接一个地写。您不能在另一个函数内定义一个函数。</p>
<hr/>
<center>
<a class="btn btn-primary btn-lg" href="chapter4.html" role="button">下一章</a> 
</center>




<div style="height:60px"></div>
</div>
</div>
</div>
<!-- right gutter -->
<div style="flex-grow:4"></div>
</div>
</div>
</body>
</html>
