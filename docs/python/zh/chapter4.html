
<html>
<head>

<title>卡雷尔读者</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> 
<script src="//compedu.stanford.edu/codeinternational/docsplugins/jquery.min.js"></script>
<link href="//compedu.stanford.edu/codeinternational/docsplugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"/> 
<script src="//compedu.stanford.edu/codeinternational/docsplugins/bootstrap/js/bootstrap.min.js"></script>
<link href="//compedu.stanford.edu/codeinternational/docsstyle.css" rel="stylesheet"/> 
<script src="//compedu.stanford.edu/codeinternational/docs/karel/js/html/websiteImports.js"></script>
<script>importCss();</script>
<script>importJs();</script>
</head>
<body>
<!-- container -->
<div class="bookContainer">

<!-- side bar -->
<div class="bookSideBar">
<div class="homeLink">
 <a href="//compedu.stanford.edu/codeinternational/docspython/zh/intro.html">
<span aria-hidden="true" class="glyphicon glyphicon-home"></span> 卡雷尔</a> 
</div>
<hr/>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/chapter1.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/chapter1.html">1  - 遇见卡雷尔</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/chapter2.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/chapter2.html">2  - 编程</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/chapter3.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/chapter3.html">3-新功能</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/chapter4.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/chapter4.html">4  - 分解</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/chapter5.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/chapter5.html">5  - 对于循环</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/chapter6.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/chapter6.html">6  - 循环时</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/chapter7.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/chapter7.html">7  - 条件</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/chapter8.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/chapter8.html">8  - 细化</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/chapter9.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/chapter9.html">9-额外功能</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/reference.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/reference.html">10  - 参考</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/zh/ide.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/zh/ide.html">11  - 代码</a> 
</div>
<hr/>
<!-- <a href="//compedu.stanford.edu/codeinternational/docs"><img style = "width:40px" src="//compedu.stanford.edu/codeinternational/docsimages/unFlag.png"/>  Learn more</a>  -->
<!-- <center>
    <img style ="width:75px;" src="//compedu.stanford.edu/codeinternational/docsimages/stanford.png"/> 
    </center> -->
</div>
<!-- content -->
<div class="bookContent" style="display: flex;">
<!-- right gutter -->
<div style="flex-grow:1;max-width:50px;"></div>
<!-- main stuff -->
<div class="" style="flex-basis:740px; max-width:740px; margin-left:20px; margin-right:20px">
<div class="row">
<div class="col-md-12 col-xs-12">


<h1>第4章：分解</h1>
<hr/>
<p>为了说明能够定义新功能所带来的更多功能，让Karel从一个地方到另一个地方做一些比move和锥体更实用的move用。道路通常似乎需要维修，看卡雷尔（Karel）是否可以填补其抽象世界的坑洼可能会很有趣。例如，假设卡雷尔（Karel）站在左侧图所示的“道路”上，即道路坑洼左侧的一个角。卡雷尔（Karel）的工作是用锥体填充孔，然后转到下一个角。右图说明了程序执行后的世界状况。</p>





<div class="section" id="ba">
<div class="ide getStarted" id="baIde">
<div class="commandCanvasDiv" id="baCanvasDiv">
<div>
<div class="commandCanvasTitle">之前：</div>
<div class="commandCanvasOuter">
<canvas id="baCanvasBefore" style="width:300px;"></canvas>
</div>
</div>
<div style="width:50px"></div>
<div>
<div class="commandCanvasTitle">后：</div>
<div class="commandCanvasOuter">
<canvas id="baCanvasAfter" style="width:300px;"></canvas>
</div>
</div>
</div>
</div>
<script>

        

function exampleba() {
 var karelIde = null;
 var buttonState = 'play';
 var canvas = null;

 function main() {
    canvas = document.getElementById('baCanvasBefore');
    karelIde = KarelIde('python',null, canvas, 'pothole', 0.0, 'zh',1000, 0.82 * 1000);

    let canvasGoal = document.getElementById('baCanvasAfter');
    let goalIde = KarelIde('python',null, canvasGoal, 'potholeGoal',0.0, 'zh',  1000, 0.82 * 1000)
 }

 
 main()
 
}
exampleba();
    </script>
</div>

<p>如果限于四个预定义命令，则 <code>main()</code> 解决此问题的功能如下所示：</p>
<p style="margin-left:2em">
 <code><span class="keyword">def</span> main():</code> <br/>
 <code style="margin-left:2em">move()</code> <br/>
 <code style="margin-left:2em">turn_left()</code> <br/>
 <code style="margin-left:2em">turn_left()</code> <br/>
 <code style="margin-left:2em">turn_left()</code> <br/>
 <code style="margin-left:2em">move()</code> <br/>
 <code style="margin-left:2em">放锥体()</code> <br/>
 <code style="margin-left:2em">turn_left()</code> <br/>
 <code style="margin-left:2em">turn_left()</code> <br/>
 <code style="margin-left:2em">move()</code> <br/>
 <code style="margin-left:2em">turn_left()</code> <br/>
 <code style="margin-left:2em">turn_left()</code> <br/>
 <code style="margin-left:2em">turn_left()</code> <br/>
 <code style="margin-left:2em">move()</code> <br/>
</p>
<p>定义 <code>turn_right()</code> 功能是要重复三遍很麻烦 <code>turn_left()</code> 命令以完成右转弯。定义新功能还有一个重要的目的，那就是让您避免每次想要执行特定任务时都重复相同的命令序列。定义函数的能力可以解锁编程中最重要的策略，即将大问题分解为更容易解决的小问题的过程。将程序分解为较小的部分的过程称为 <b>分解</b> ，而大问题的组成部分称为 <b>子问题</b> 。</p>
<p>例如，填补道路上的洞的问题可以分解为以下子问题：</p>
<ol>
<li>向上移动到洞口<li>将锥体放入孔中<li>转到下一个角落</li></li></li></ol>
<p>如果以这种方式考虑问题，则可以使用函数定义来创建一个反映您对程序结构概念的程序。 main函数如下所示：</p>
<p style="margin-left:2em">
 <code><span class="keyword">def</span> main():</code> <br/>
 <code style="margin-left:2em">move()</code> <br/>
 <code style="margin-left:2em">填充坑洼()</code> <br/>
 <code style="margin-left:2em">move()</code> <br/>
</p>
<p>与轮廓的对应关系一目了然，只要让Karel理解您的意思，一切都会很棒。 <code>填充坑洼()</code> 。拥有定义功能的权力，实施 <code>填充坑洼()</code> 非常简单。您要做的就是定义一个 <code>填充坑洼()</code> 该函数的主体由您已经编写的用于执行此工作的命令组成，如下所示：</p>
<p style="margin-left:2em">
 <code><span class="keyword">def</span> 填充坑洼():</code> <br/>
 <code style="margin-left:2em">turn_right()</code> <br/>
 <code style="margin-left:2em">move()</code> <br/>
 <code style="margin-left:2em">放锥体()</code> <br/>
 <code style="margin-left:2em">turn_around()</code> <br/>
 <code style="margin-left:2em">move()</code> <br/>
 <code style="margin-left:2em">turn_right()</code> <br/>
</p>
<p>这是完整的程序。请注意，仅通过阅读以下内容，您便可以了解程序员的意图 <code>main()</code> 功能。当您使用run程序时，突出显示的行将逐步显示计算机将如何执行该程序。但是，由于该程序已被很好地分解，因此我们可以在人类的思想层面上理解它：</p>





<div class="section embeddedIde" id="pothole">
<div class="ide getStarted" id="potholeIde" style="height:516.2px">
<div class="ideCenter" id="potholeIdeCenter">
<div class="ideEditorDiv" id="potholeEditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="potholeCanvasDiv">
<canvas class="ideCanvas" id="potholeCanvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="potholeRunButton"><span class="glyphicon glyphicon-play"></span>运行程序</button>
</div>
</div>
<script>

        

function examplepothole() {
STARTER_CODE = `

from 卡雷尔.stanford import *
def main():
   move()
   填充坑洼()
   move()

＃通过以下方式填充Karel当前位置下方的坑洼
＃在该角上放置一个锥体 。为了使此功能起作用
＃正确，卡雷尔必须正对着上方的东方
＃坑洼。执行完成后，Karel将拥有
＃返回同一广场，再次面向东方。
def 填充坑洼():
   turn_right()
   move()
   放锥体()
   turn_around()
   move()
   turn_right()

＃将Karel向右旋转90度。
def turn_right():
   turn_left()
   turn_left()
   turn_left()

＃将Karel旋转180度。
def turn_around():
   turn_left()
   turn_left()
`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('potholeEditor','potholeEditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('potholeCanvas');
    karelIde = KarelIde('python',karelEditor, canvas, 'pothole', 0.0, 'zh');
    $('#potholeRunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#potholeRunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#potholeRunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 516.2;
    var canvasWidth = 200
    var parentWidth = $("#pothole").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('potholeIde');
    var editorDiv = document.getElementById('potholeEditorDiv');
    var canvas = document.getElementById('potholeCanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplepothole();
    </script>
</div>
<hr/>
<center>
<a class="btn btn-primary btn-lg" href="chapter5.html" role="button">下一章</a> 
</center>




<div style="height:60px"></div>
</div>
</div>
</div>
<!-- right gutter -->
<div style="flex-grow:4"></div>
</div>
</div>
</body>
</html>
