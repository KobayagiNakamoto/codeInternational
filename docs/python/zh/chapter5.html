
<html>
<head>

<title>卡雷尔读者</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> 
<script src="//compedu.stanford.edu/codeinternational/docs/plugins/jquery.min.js"></script>
<link href="//compedu.stanford.edu/codeinternational/docs/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"/> 
<script src="//compedu.stanford.edu/codeinternational/docs/plugins/bootstrap/js/bootstrap.min.js"></script>
<link href="//compedu.stanford.edu/codeinternational/docs/style.css" rel="stylesheet"/> 
<script src="//compedu.stanford.edu/codeinternational/docs//karel/js/html/websiteImports.js"></script>
<script>importCss();</script>
<script>importJs();</script>
</head>
<body>
<!-- container -->
<div class="bookContainer">

<!-- side bar -->
<div class="bookSideBar">
<div class="homeLink">
 <a href="//compedu.stanford.edu/codeinternational/docs/python/zh/intro.html">
<span aria-hidden="true" class="glyphicon glyphicon-home"></span> 卡雷尔</a> 
</div>
<hr/>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/chapter1.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/chapter1.html">1  - 遇见卡雷尔</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/chapter2.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/chapter2.html">2  - 编程</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/chapter3.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/chapter3.html">3-新功能</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/chapter4.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/chapter4.html">4  - 分解</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/chapter5.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/chapter5.html">5  - 对于循环</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/chapter6.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/chapter6.html">6  - 循环时</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/chapter7.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/chapter7.html">7  - 条件</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/chapter8.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/chapter8.html">8  - 细化</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/chapter9.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/chapter9.html">9-额外功能</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/reference.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/reference.html">10  - 参考</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docs/python/zh/ide.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docs/python/zh/ide.html">11  - 代码</a> 
</div>
<hr/>
<!-- <a href="//compedu.stanford.edu/codeinternational/docs/"><img style = "width:40px" src="//compedu.stanford.edu/codeinternational/docs/images/unFlag.png"/>  Learn more</a>  -->
<!-- <center>
    <img style ="width:75px;" src="//compedu.stanford.edu/codeinternational/docs/images/stanford.png"/> 
    </center> -->
</div>
<!-- content -->
<div class="bookContent" style="display: flex;">
<!-- right gutter -->
<div style="flex-grow:1;max-width:50px;"></div>
<!-- main stuff -->
<div class="" style="flex-basis:740px; max-width:740px; margin-left:20px; margin-right:20px">
<div class="row">
<div class="col-md-12 col-xs-12">


<h1>第5章：循环</h1>
<hr/>
<p>计算机特别擅长的一件事是重复。我们如何说服Karel多次执行代码块？若要查看如何使用重复，请考虑放置42 锥体 s的任务：</p>





<div class="section" id="ba">
<div class="ide getStarted" id="baIde">
<div class="commandCanvasDiv" id="baCanvasDiv">
<div>
<div class="commandCanvasTitle">之前：</div>
<div class="commandCanvasOuter">
<canvas id="baCanvasBefore" style="width:200px;"></canvas>
</div>
</div>
<div style="width:50px"></div>
<div>
<div class="commandCanvasTitle">后：</div>
<div class="commandCanvasOuter">
<canvas id="baCanvasAfter" style="width:200px;"></canvas>
</div>
</div>
</div>
</div>
<script>

        

function exampleba() {
 var karelIde = null;
 var buttonState = 'play';
 var canvas = null;

 function main() {
    canvas = document.getElementById('baCanvasBefore');
    karelIde = KarelIde('python',null, canvas, '99beepersStart', 0.0, 'zh',1000, 1.0 * 1000);

    let canvasGoal = document.getElementById('baCanvasAfter');
    let goalIde = KarelIde('python',null, canvasGoal, '99beepersGoal',0.0, 'zh',  1000, 1.0 * 1000)
 }

 
 main()
 
}
exampleba();
    </script>
</div>

<h3>基本的循环</h3>
<p>由于您知道确切要放置42 锥体 s，因此您需要的控制语句是 <b>for循环</b> ，它指定您要重复执行固定次数的操作。的结构 <code>for</code> 声明看起来很复杂，主要是因为它实际上比Karel所需的功能强大得多。的唯一版本 <code>for</code> 卡雷尔使用的语法是：</p>
<p class="demoCode">
 <code>for i in range(</code> <i class="demoText">计数</i> <code>):</code> <br/>
<i style="margin-left:2em">要重复的陈述</i><br/>
</p>
<p class="mb-20">我们将详细介绍 <code>for</code> 在课程的后面循环。现在，您应该阅读此行，以表示“重复函数主体中的语句”。<i class="demoText">计数</i>次。”我们可以使用这个新 <b>for循环</b> 通过替换放置42 锥体 s<i class="demoText">计数</i>用42并输入命令 <code>放锥体()</code> 在里面 <code>for</code> 循环代码块。我们在代码块中调用命令 <b>身体</b> ：</p>
<p>




<div class="section embeddedIde" id="99beepers">
<div class="ide getStarted" id="99beepersIde" style="height:195.8px">
<div class="ideCenter" id="99beepersIdeCenter">
<div class="ideEditorDiv" id="99beepersEditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="99beepersCanvasDiv">
<canvas class="ideCanvas" id="99beepersCanvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="99beepersRunButton"><span class="glyphicon glyphicon-play"></span>运行程序</button>
</div>
</div>
<script>

        

function example99beepers() {
STARTER_CODE = `

＃文件：PlaceManyBeepers.py
＃-----------------------------
＃使用for循环锥体 42 锥体 s
from 卡雷尔.stanford import *

def main():
   move()
   ＃多次重复放锥体
   for i in range(42):
      放锥体()
   move()

`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('99beepersEditor','99beepersEditorDiv', STARTER_CODE, true);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('99beepersCanvas');
    karelIde = KarelIde('python',karelEditor, canvas, '99beepersStart', 0.8, 'zh');
    $('#99beepersRunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#99beepersRunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#99beepersRunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 195.8;
    var canvasWidth = 200
    var parentWidth = $("#99beepers").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('99beepersIde');
    var editorDiv = document.getElementById('99beepersEditorDiv');
    var canvas = document.getElementById('99beepersCanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
example99beepers();
    </script>
</div>
<p>
 <b>上面的代码是可编辑的</b> 。尝试更改它，使其仅放置15 锥体 s。</p>
<h3>匹配后置条件与前提条件</h3>
<p>前面的示例给人的印象是 <code>for</code> 循环重复一行代码。但是身体 <code>for</code> 循环（被重复的语句）可以是多行。这是一个将锥体放入世界各个角落的程序示例：</p>





<div class="section embeddedIde" id="cornerBeepers">
<div class="ide getStarted" id="cornerBeepersIde" style="height:213.60000000000002px">
<div class="ideCenter" id="cornerBeepersIdeCenter">
<div class="ideEditorDiv" id="cornerBeepersEditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="cornerBeepersCanvasDiv">
<canvas class="ideCanvas" id="cornerBeepersCanvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="cornerBeepersRunButton"><span class="glyphicon glyphicon-play"></span>运行程序</button>
</div>
</div>
<script>

        

function examplecornerBeepers() {
STARTER_CODE = `

＃文件：CornerBeepers.py
＃-----------------------------
＃在每个角落锥体一个锥体
from 卡雷尔.stanford import *
def main():
   ＃重复身体4次
   for i in range(4):
	   放锥体()
	   move()
	   move()
	   move()
	   turn_left()

`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('cornerBeepersEditor','cornerBeepersEditorDiv', STARTER_CODE, true);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('cornerBeepersCanvas');
    karelIde = KarelIde('python',karelEditor, canvas, 'cornerBeepersStart', 0.0, 'zh');
    $('#cornerBeepersRunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#cornerBeepersRunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#cornerBeepersRunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 213.60000000000002;
    var canvasWidth = 200
    var parentWidth = $("#cornerBeepers").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('cornerBeepersIde');
    var editorDiv = document.getElementById('cornerBeepersEditorDiv');
    var canvas = document.getElementById('cornerBeepersCanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplecornerBeepers();
    </script>
</div>

<p>密切注意程序在这些控制语句中的流动方式。程序run通过以下命令中的命令集 <code>for</code> 一次循环一个身体。它重复身体四次。</p>
<p>编写循环的最复杂的部分也许就是您需要在循环结束时了解世界的状态（ <b>后置条件</b> ）作为循环开始的世界的有效状态（ <b>前提</b> ）。在上面的示例中，假设匹配。美好的时光。在循环开始时，Karel始终位于一个正方形，没有锥体面向下一个空角。如果您删除了 <code>turn_left()</code> 在循环结束时？第一次迭代结束时的后置条件将不再满足有关Karel面对下一个空角的假设。该代码是可编辑的。尝试删除 <code>turn_left()</code> 命令看看会发生什么！</p>
<h3>嵌套循环</h3>
<p>从技术上讲， <code>for</code> 循环可以包含任何控制流代码，甚至可以包含其他循环。这是一个例子 <code>for</code> 循环，重复调用也有一个 <code>for</code> 循环。我们将其称为“嵌套”循环。在run之前，请尝试通读该程序，并了解它的作用：




<div class="section embeddedIde" id="cornerBeepers10">
<div class="ide getStarted" id="cornerBeepers10Ide" style="height:373.8px">
<div class="ideCenter" id="cornerBeepers10IdeCenter">
<div class="ideEditorDiv" id="cornerBeepers10EditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="cornerBeepers10CanvasDiv">
<canvas class="ideCanvas" id="cornerBeepers10Canvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="cornerBeepers10RunButton"><span class="glyphicon glyphicon-play"></span>运行程序</button>
</div>
</div>
<script>

        

function examplecornerBeepers10() {
STARTER_CODE = `

＃文件：CornerFiveBeepers.py
＃-----------------------------
＃在每个角落锥体五个锥体秒
from 卡雷尔.stanford import *
def main():
   ＃对每个角重复一次
   for i in range(4):
      放置五个锥体秒()
      move至下一个角落()

＃将karel重新定位到下一个角落
def move至下一个角落() :
   move()
   move()
   move()
   turn_left()

＃使用for循环放置5 锥体 s
def 放置五个锥体秒() :
   for i in range(5):
   	放锥体()

`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('cornerBeepers10Editor','cornerBeepers10EditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('cornerBeepers10Canvas');
    karelIde = KarelIde('python',karelEditor, canvas, 'cornerBeepersStart', 0.7, 'zh');
    $('#cornerBeepers10RunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#cornerBeepers10RunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#cornerBeepers10RunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 373.8;
    var canvasWidth = 200
    var parentWidth = $("#cornerBeepers10").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('cornerBeepers10Ide');
    var editorDiv = document.getElementById('cornerBeepers10EditorDiv');
    var canvas = document.getElementById('cornerBeepers10CanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplecornerBeepers10();
    </script>
</div>
</p>
</p><hr/>
<center>
<a class="btn btn-primary btn-lg" href="chapter6.html" role="button">下一章</a> 
</center>




<div style="height:60px"></div>
</div>
</div>
</div>
<!-- right gutter -->
<div style="flex-grow:4"></div>
</div>
</div>
</body>
</html>
