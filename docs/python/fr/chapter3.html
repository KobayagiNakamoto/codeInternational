
<html>
<head>

<title>Karel Reader</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> 
<script src="//compedu.stanford.edu/codeinternational/docsplugins/jquery.min.js"></script>
<link href="//compedu.stanford.edu/codeinternational/docsplugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"/> 
<script src="//compedu.stanford.edu/codeinternational/docsplugins/bootstrap/js/bootstrap.min.js"></script>
<link href="//compedu.stanford.edu/codeinternational/docsstyle.css" rel="stylesheet"/> 
<script src="//compedu.stanford.edu/codeinternational/docs/karel/js/html/websiteImports.js"></script>
<script>importCss();</script>
<script>importJs();</script>
</head>
<body>
<!-- container -->
<div class="bookContainer">

<!-- side bar -->
<div class="bookSideBar">
<div class="homeLink">
 <a href="//compedu.stanford.edu/codeinternational/docspython/fr/intro.html">
<span aria-hidden="true" class="glyphicon glyphicon-home"></span> 
      Karel
    </a> 
</div>
<hr/>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/chapter1.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/chapter1.html">
      1 - Rencontrez Karel
    </a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/chapter2.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/chapter2.html">2 - Programmation</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/chapter3.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/chapter3.html">3 - Nouvelles fonctions</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/chapter4.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/chapter4.html">4 - Décomposition</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/chapter5.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/chapter5.html">5 - Boucles For</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/chapter6.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/chapter6.html">6 - Boucles While</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/chapter7.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/chapter7.html">7 - Conditions</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/chapter8.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/chapter8.html">8 - Raffinement</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/chapter9.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/chapter9.html">9 - Fonctionnalités supplémentaires</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/reference.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/reference.html">10 - Référence</a> 
</div>
<div class="chapterTab" onclick="location.href='//compedu.stanford.edu/codeinternational/docspython/fr/ide.html'">
<a class="bookLink btn btn-link" href="//compedu.stanford.edu/codeinternational/docspython/fr/ide.html">11 - Code</a> 
</div>
<hr/>
<!-- <a href="//compedu.stanford.edu/codeinternational/docs"><img style = "width:40px" src="//compedu.stanford.edu/codeinternational/docsimages/unFlag.png"/>  Learn more</a>  -->
<!-- <center>
    <img style ="width:75px;" src="//compedu.stanford.edu/codeinternational/docsimages/stanford.png"/> 
    </center> -->
</div>
<!-- content -->
<div class="bookContent" style="display: flex;">
<!-- right gutter -->
<div style="flex-grow:1;max-width:50px;"></div>
<!-- main stuff -->
<div class="" style="flex-basis:740px; max-width:740px; margin-left:20px; margin-right:20px">
<div class="row">
<div class="col-md-12 col-xs-12">


<h1>Chapitre 3: Définition de nouvelles fonctions</h1>
<hr/>
<p>
  Dans le dernier chapitre, nous avons écrit un programme pour aider Karel à gravir un rebord simple:
</p>
<h3>Exemple: PremierKarel</h3>





<div class="section embeddedIde" id="beeperPickingRedux">
<div class="ide getStarted" id="beeperPickingReduxIde" style="height:302.6px">
<div class="ideCenter" id="beeperPickingReduxIdeCenter">
<div class="ideEditorDiv" id="beeperPickingReduxEditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="beeperPickingReduxCanvasDiv">
<canvas class="ideCanvas" id="beeperPickingReduxCanvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="beeperPickingReduxRunButton"><span class="glyphicon glyphicon-play"></span>Exécuter de programme</button>
</div>
</div>
<script>

        

function examplebeeperPickingRedux() {
STARTER_CODE = `

# Fichier: PremierKarel.py
# -----------------------------
# Karel prend un jeton et le place sur un rebord.
from karel.stanfordkarel import *
def main() :
   avancer()
   ramasser_jeton()
   avancer()
   tourner_gauche()
   avancer()
   tourner_gauche()
   tourner_gauche()
   tourner_gauche()
   avancer()
   avancer()
   laisser_jeton()
   avancer()
`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('beeperPickingReduxEditor','beeperPickingReduxEditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('beeperPickingReduxCanvas');
    karelIde = KarelIde('python',karelEditor, canvas, 'stepUp', 0.8, 'fr');
    $('#beeperPickingReduxRunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#beeperPickingReduxRunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#beeperPickingReduxRunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 302.6;
    var canvasWidth = 300
    var parentWidth = $("#beeperPickingRedux").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('beeperPickingReduxIde');
    var editorDiv = document.getElementById('beeperPickingReduxEditorDiv');
    var canvas = document.getElementById('beeperPickingReduxCanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplebeeperPickingRedux();
    </script>
</div>

<p>Même si le <code>PremierKarel</code>  programme ci-dessus montre qu’il est possible d’effectuer le <code>tourner_droite()</code> opération utilisant uniquement les commandes intégrées de Karel, le programme résultant n'est pas particulièrement clair sur le plan conceptuel. Dans votre conception mentale du programme, Karel tourne à droite lorsqu'il atteint le haut du rebord. Le fait que vous devez en utiliser trois <code>tourner_gauche()</code> les commandes pour le faire sont ennuyeuses. Ce serait beaucoup plus simple si vous pouviez simplement dire <code>tourner_droite()</code>  et demandez à Karel de comprendre cette commande. Le programme résultant serait non seulement plus court et plus facile à écrire, mais aussi beaucoup plus facile à lire.
</p>
<h3>Définir de nouvelles commandes</h3>
<p>Heureusement, le langage de programmation Karel permet de définir de nouvelles commandes simplement en incluant de nouvelles définitions de fonctions. Chaque fois que vous avez une séquence de commandes Karel qui effectue une tâche utile - comme tourner à droite - vous pouvez définir une nouvelle fonction qui exécute cette séquence de commandes. Le format de définition d'une nouvelle fonction Karel est sensiblement le même que la définition de <code>main()</code> dans les exemples précédents, qui est une définition de fonction à part entière. Une définition de fonction typique ressemble à ceci:</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">def</span> </code> <i class="demoText">prénom</i> <code>():</code> <br/>
<i class="demoText" style="margin-left:3.5em">commandes qui composent le corps de la fonction</i><br/>
</p>
<p>Dans ce modèle, nom représente le nom que vous avez choisi pour la nouvelle fonction. Pour compléter la définition, tout ce que vous avez à faire est de fournir la séquence de commandes dans les lignes après les deux points, qui sont toutes indentées d'un onglet. Par exemple, vous pouvez définir <code>tourner_droite()</code>  comme suit:
</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">def</span> tourner_droite():</code> <br/>
 <code style="margin-left:3.5em">tourner_gauche()</code> <br/>
 <code style="margin-left:3.5em">tourner_gauche()</code> <br/>
 <code style="margin-left:3.5em">tourner_gauche()</code> <br/>
</p>
<p>De même, vous pouvez définir un nouveau <code>tourner_autour()</code> fonctionne comme ceci:</p>
<p class="demoCode" style="margin-left:10px">
 <code>   <span class="keyword">def</span> tourner_autour():</code> <br/>
 <code style="margin-left:3.5em">tourner_gauche()</code> <br/>
 <code style="margin-left:3.5em">tourner_gauche()</code> <br/>
</p>
<p>Vous pouvez utiliser le nom d'une nouvelle fonction comme n'importe quelle commande intégrée de Karel. Par exemple, une fois que vous avez défini <code>tourner_droite()</code> , tu pourrais remplacer les trois <code>tourner_gauche()</code> commandes dans le programme avec un seul appel au <code>tourner_droite()</code> fonction. Voici une mise en œuvre révisée du programme qui utilise <code>tourner_droite()</code> :
</p>





<div class="section embeddedIde" id="stepUp2">
<div class="ide getStarted" id="stepUp2Ide" style="height:409.40000000000003px">
<div class="ideCenter" id="stepUp2IdeCenter">
<div class="ideEditorDiv" id="stepUp2EditorDiv" style="width:200px"></div>
<div class="ideCanvasDiv" id="stepUp2CanvasDiv">
<canvas class="ideCanvas" id="stepUp2Canvas"></canvas>
</div>
</div>
</div>
<div style="width:100%;">
<div class="buttonBar">
<button class="btn btn-default" id="stepUp2RunButton"><span class="glyphicon glyphicon-play"></span>Exécuter de programme</button>
</div>
</div>
<script>

        

function examplestepUp2() {
STARTER_CODE = `

# Fichier: Jeton PickingKarel.py
# -----------------------------
# Le programme Jeton Jeton définit un " main "
# fonction avec trois commandes. Ces commandes provoquent
# Karel à avancer avancer d'un bloc, prendre un
# jeton puis avancer devant le coin suivant.
from karel.stanfordkarel import *
def main():
   avancer()
   ramasser_jeton()
   avancer()
   tourner_gauche()
   avancer()
   tourner_droite()
   avancer()
   avancer()
   laisser_jeton()
   avancer()

def tourner_droite():
   tourner_gauche()
   tourner_gauche()
   tourner_gauche()
`
// because of that extra endline at the start of the string
STARTER_CODE = STARTER_CODE.trim();

 var karelIde = null;
 var karelEditor = null;
 var buttonState = 'play';

 function main() {
   karelEditor = importPythonEditor('stepUp2Editor','stepUp2EditorDiv', STARTER_CODE, false);
     //importRunButtonBar('example1ButtonBar');
    
    $("[title]").tooltip({ position: "bottom center", opacity: 0.9});
    
    initTabs();
    var canvas = document.getElementById('stepUp2Canvas');
    karelIde = KarelIde('python',karelEditor, canvas, 'stepUp', 0.0, 'fr');
    $('#stepUp2RunButton').click(function(){playClicked()});
    onresize();
    
 }

 function playClicked() {
  if(buttonState == 'play') {
    karelIde.playButton();
      
      var resetText = '<span class="glyphicon glyphicon-repeat"></span> Reset Program';
      $('#stepUp2RunButton').html(resetText);
      buttonState = 'reset';
     } else if (buttonState == 'reset') {
      karelIde.stopButton();
      var playText = '<span class="glyphicon glyphicon-play"></span> Run Program';
      $('#stepUp2RunButton').html(playText);
      buttonState = 'play';
     }
  
  }

 function onresize() { 
    var parentHeight = 409.40000000000003;
    var canvasWidth = 300
    var parentWidth = $("#stepUp2").width();
    console.log('pw: ' + parentWidth);

    var ide = document.getElementById('stepUp2Ide');
    var editorDiv = document.getElementById('stepUp2EditorDiv');
    var canvas = document.getElementById('stepUp2CanvasDiv');
    
    var ideHeight = parentHeight
    var centerHeight = ideHeight;

    var availibleWidth = parentWidth;
    var elementSpacing = 12;

    var editorWidth = availibleWidth - canvasWidth - elementSpacing; 

    canvas.style.width = canvasWidth + 'px';
    canvas.style.height = canvasWidth + 'px';
    canvas.style.left = (editorWidth + elementSpacing) + 'px';



    editorDiv.style.left = 0 + 'px'
    editorDiv.style.width = editorWidth + 'px';
    editorDiv.style.height = parentHeight + 'px';
    console.log('editor width: ' + editorWidth)

    if (karelEditor) {
       karelEditor.renderer.onResize();
    }
 }
 main()
 
}
examplestepUp2();
    </script>
</div>

<h3>Blocs de code de fonction</h3>
<p>Un groupe de commandes suit les deux points <code translate="no">:</code> qui sont en retrait, s'appelle un <b>bloc de code</b> . Le corps de votre fonction est un bloc de code. Remarquez comment le contenu d'un bloc de code est mis en retrait d'un onglet. Ceci est important du point de vue fonctionnel car cela permet à Python de savoir quelles lignes de code se trouvent dans un bloc donné.</p>
<p>Vous pouvez définir autant de fonctions que vous le souhaitez. Ils devraient tous être écrits les uns après les autres. Vous ne pouvez pas définir une fonction dans une autre fonction.</p>
<hr/>
<center>
<a class="btn btn-primary btn-lg" href="chapter4.html" role="button">Chapitre suivant</a> 
</center>




<div style="height:60px"></div>
</div>
</div>
</div>
<!-- right gutter -->
<div style="flex-grow:4"></div>
</div>
</div>
</body>
</html>
